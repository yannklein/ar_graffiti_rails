function insertMessage(message) {
  console.log("top");
  const messagesContainer = document.querySelector('.message');
  messagesContainer.insertAdjacentHTML('beforeend', message);
}

<% if @message.errors.any? %>
  // handle validation errors later
<% else %>
  insertMessage('<%= j render "message", message: @message %>');
<% end %>
